---
title: 'API Commands'
description: 'A complete list of the commands you can use with the Caddy Control API'
date: 2025-04-18
---

# API Commands

This page shows all the commands you can use with the Caddy Control API. For each command, you'll see what information you need to provide and what you'll get back.

## Domain Management

### Get All Domains {"/get-domains"}

Get a list of all your domains.

**Address:** `/api/domains`  
**Method:** `GET`  
**Headers:** `{ "x-api-key": "your_api_key" }`

**What you'll get back:**

```json
{
  "data": [
    {
      "id": "cm8o9l9d50001sy2uorjt2wua",
      "incomingAddress": "example.com",
      "destinationAddress": "your-server.com",
      "port": 443,
      "isLocked": false,
      "enableHttps": true,
      "createdAt": "2025-04-18T08:59:25.481Z",
      "checkResults": {
        "dnsCheck": {
          "result": true,
          "description": "Domain points to your server correctly."
        },
        "proxyReachability": {
          "result": true,
          "description": "Your server is reachable."
        }
      }
    }
  ],
  "total": 1
}
```

### Add a Domain {"/add-domain"}

Add a new domain to your system.

**Address:** `/api/domain/add`  
**Method:** `POST`  
**Headers:** `{ "x-api-key": "your_api_key" }`  
**Content-Type:** `application/json`  

**Information to provide:**

```json
{
  "domain": "example.com",
  "destination": "your-server.com",
  "port": "443",
  "enableHttps": true,
  "enableRedirection": false,
  "redirectTo": ""
}
```

**What these fields mean:**
- `domain`: The website address visitors will use
- `destination`: Where the traffic should go
- `port`: The connection port (usually 443 for secure sites)
- `enableHttps`: Whether to use secure connections (recommended)
- `enableRedirection`: Set to true if you want to redirect instead of connecting
- `redirectTo`: Where to redirect (only needed if enableRedirection is true)

**What you'll get back:**

```json
{
  "data": {
    "id": "cm8o9l9d50001sy2uorjt2wua",
    "incomingAddress": "example.com",
    "destinationAddress": "your-server.com",
    "port": 443,
    "isLocked": false,
    "enableHttps": true,
    "createdAt": "2025-04-18T08:59:25.481Z"
  },
  "message": "Domain added successfully!"
}
```

### Delete a Domain {"/delete-domain"}

Remove a domain from your system.

**Address:** `/api/domain/{id}`  
**Method:** `DELETE`  
**Headers:** `{ "x-api-key": "your_api_key" }`  

**Path Parameters:**
- `id`: The ID of the domain you want to delete

**What you'll get back:**

```json
{
  "message": "Domain deleted successfully"
}
```

## Server Configuration

### View Current Configuration {"/get-caddy-config"}

See the current settings for your Caddy server.

**Address:** `/api/caddy/config`  
**Method:** `GET`  
**Headers:** `{ "x-api-key": "your_api_key" }`  

**What you'll get back:**

```json
{
  "config": {
    "apps": {
      "http": {
        "servers": {
          "main": {
            "listen": [":443", ":80"],
            "routes": [
              // Server routing settings
            ]
          }
        }
      },
      "tls": {
        // Security settings
      }
    }
  }
}
```

## API Key Management

### See All API Keys {"/get-api-keys"}

Get a list of all your API keys.

**Address:** `/api/key`  
**Method:** `GET`  
**Headers:** `{ "x-api-key": "your_api_key" }`  

**What you'll get back:**

```json
{
  "data": [
    {
      "id": "clqr5l9d50001sy2uorjt2wua",
      "name": "Website Connection",
      "keyId": "keyid_123456",
      "createdAt": "2025-04-18T08:59:25.481Z"
    }
  ],
  "total": 1
}
```

### Create a New API Key {"/create-api-key"}

Make a new API key.

**Address:** `/api/key`  
**Method:** `POST`  
**Headers:** `{ "x-api-key": "your_api_key" }`  
**Content-Type:** `application/json`  

**Information to provide:**

```json
{
  "name": "Website Connection"
}
```

**What these fields mean:**
- `name`: A name to help you remember what this key is for

**What you'll get back:**

```json
{
  "data": {
    "id": "clqr5l9d50001sy2uorjt2wua",
    "name": "Website Connection",
    "keyId": "keyid_123456",
    "key": "key_f7sd89f7s98df79s8df7s9d8f7",
    "createdAt": "2025-04-18T08:59:25.481Z"
  },
  "message": "API key created successfully. Please save your key as it won't be displayed again."
}
```

### Delete an API Key {"/delete-api-key"}

Remove an API key.

**Address:** `/api/key/{id}`  
**Method:** `DELETE`  
**Headers:** `{ "x-api-key": "your_api_key" }`  

**Path Parameters:**
- `id`: The ID of the API key you want to delete

**What you'll get back:**

```json
{
  "message": "API key deleted successfully"
}
```

## Understanding Error Codes

When something goes wrong, you'll get an error code that helps explain the problem:

| Code | What It Means |
|-------------|-------------|
| 200 | Success - Everything worked |
| 400 | Bad Request - Something was wrong with your request |
| 401 | Unauthorized - Your API key is missing or wrong |
| 403 | Forbidden - Your API key doesn't have permission |
| 404 | Not Found - What you're looking for doesn't exist |
| 409 | Conflict - Something is preventing the operation |
| 429 | Too Many Requests - You're making too many requests too quickly |
| 500 | Server Error - Something went wrong on our end |

## Example Error Messages

```json
{
  "error": "Domain already exists",
  "status": 400
}
```

```json
{
  "error": "Invalid API key",
  "status": 401
}
```

## Working with Large Lists

For commands that return lists of items, you can use these options to break them into smaller pages:

- `page`: Which page to show (starts at 1)
- `limit`: How many items per page (default: 10, maximum: 100)

Example:

```
GET /api/domains?page=2&limit=20
```

You'll get back pagination details:

```json
{
  "data": [...],
  "total": 45,
  "page": 2,
  "limit": 20,
  "totalPages": 3
}
```